<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="918px" preserveAspectRatio="none" style="width:1042px;height:918px;background:#FFFFFF;" version="1.1" viewBox="0 0 1042 918" width="1042px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="525" x="260" y="30.1074">UC36 - Get Peak Power consumption of the House in a given period - Part 2</text><rect fill="#D3D3D3" height="866.6816" style="stroke:#181818;stroke-width:0.5;" width="800" x="230" y="45.6211"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="76" x="594" y="59.6494">&#171;Container&#187;</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="46" x="590" y="76.9404">:Server</text><rect fill="#FFFFFF" height="555.5293" style="stroke:#181818;stroke-width:1.0;" width="10" x="295" y="235.2793"/><rect fill="#FFFFFF" height="48.582" style="stroke:#181818;stroke-width:1.0;" width="10" x="848" y="399.3164"/><rect fill="none" height="403.7832" style="stroke:#000000;stroke-width:1.5;" width="972" x="64" y="356.7344"/><rect fill="none" height="202.0371" style="stroke:#000000;stroke-width:1.5;" width="799" x="74" y="507.1895"/><rect fill="none" height="168.7461" style="stroke:#000000;stroke-width:1.5;" width="779" x="84" y="533.4805"/><rect fill="none" height="63.582" style="stroke:#000000;stroke-width:1.5;" width="629" x="224" y="631.6445"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="300" x2="300" y1="136.4453" y2="857.0605"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="853" x2="853" y1="136.4453" y2="857.0605"/><rect fill="#E2E2F0" height="51.2422" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="132" x="234" y="84.2031"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="89" x="255.5" y="106.3105">&#171;Component&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="241" y="124.9316">PeakPowerService</text><rect fill="#E2E2F0" height="51.2422" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="132" x="234" y="856.0605"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="89" x="255.5" y="878.168">&#171;Component&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="241" y="896.7891">PeakPowerService</text><rect fill="#E2E2F0" height="51.2422" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="346" x="680" y="84.2031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="180" x="763" y="106.3105">mapOfPowerSourcesValues:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="332" x="687" y="124.9316">Map&lt;DeviceID,Map&lt;Timestamp, InstantTimeValue&gt;&gt;</text><rect fill="#E2E2F0" height="51.2422" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="346" x="680" y="856.0605"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="180" x="763" y="878.168">mapOfPowerSourcesValues:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="332" x="687" y="896.7891">Map&lt;DeviceID,Map&lt;Timestamp, InstantTimeValue&gt;&gt;</text><rect fill="#FFFFFF" height="555.5293" style="stroke:#181818;stroke-width:1.0;" width="10" x="295" y="235.2793"/><rect fill="#FFFFFF" height="48.582" style="stroke:#181818;stroke-width:1.0;" width="10" x="848" y="399.3164"/><rect fill="none" height="43.252" style="stroke:#000000;stroke-width:1.5;" width="258" x="231" y="146.4453"/><path d="M231,146.4453 L293,146.4453 L293,155.4453 L283,165.4453 L231,165.4453 L231,146.4453 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="244" y="162.4736">ref</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="250" x="235" y="182.3945">UC36-SD_Part1-GetPeakPowerConsumption</text><polygon fill="#181818" points="283,231.2793,293,235.2793,283,239.2793,287,235.2793" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="0" x2="289" y1="235.2793" y2="235.2793"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194" x="7" y="212.7256">calculatePeakPowerConsumption</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="276" x="7" y="230.0166">(powerGridValues, mapOfPowerSourcesValues)</text><path d="M136,248.2793 L136,344.2793 L464,344.2793 L464,258.2793 L454,248.2793 L136,248.2793 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M454,248.2793 L454,258.2793 L464,258.2793 L454,248.2793 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="305" x="142" y="267.3076">For each PowerGrid Value, find PowerSource Values</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="297" x="146" y="284.5986">that are within the end Time of the PowerGrid Value</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="146" y="301.8896">and the defined cadence.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="299" x="146" y="319.1807">The peakPowerConsumption Value is tracked in the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="146" y="336.4717">peakPowerConsumption variable.</text><path d="M64,356.7344 L137,356.7344 L137,366.0254 L127,376.0254 L64,376.0254 L64,356.7344 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="403.7832" style="stroke:#000000;stroke-width:1.5;" width="972" x="64" y="356.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="79" y="371.7627">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="200" x="152" y="370.6045">[for each Value in powerGridValues]</text><polygon fill="#181818" points="836,395.3164,846,399.3164,836,403.3164,840,399.3164" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="305" x2="842" y1="399.3164" y2="399.3164"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="312" y="394.0537">values()</text><polygon fill="#181818" points="316,443.8984,306,447.8984,316,451.8984,312,447.8984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="310" x2="852" y1="447.8984" y2="447.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213" x="322" y="425.3447">Map&lt;Timestamp, InstantTimeValue&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="326" y="442.6357">mapOfValuesPerDevice</text><line style="stroke:#181818;stroke-width:1.0;" x1="305" x2="347" y1="479.1895" y2="479.1895"/><line style="stroke:#181818;stroke-width:1.0;" x1="347" x2="347" y1="479.1895" y2="492.1895"/><line style="stroke:#181818;stroke-width:1.0;" x1="306" x2="347" y1="492.1895" y2="492.1895"/><polygon fill="#181818" points="316,488.1895,306,492.1895,316,496.1895,312,492.1895" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="340" x="312" y="473.9268">totalConsumption = Value.getReading().getMeasurement())</text><path d="M74,507.1895 L147,507.1895 L147,516.4805 L137,526.4805 L74,526.4805 L74,507.1895 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="202.0371" style="stroke:#000000;stroke-width:1.5;" width="799" x="74" y="507.1895"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="89" y="522.2178">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="232" x="162" y="521.0596">[for each mapOfValuesPerDevice.values()]</text><path d="M84,533.4805 L157,533.4805 L157,542.7715 L147,552.7715 L84,552.7715 L84,533.4805 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="168.7461" style="stroke:#000000;stroke-width:1.5;" width="779" x="84" y="533.4805"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="99" y="548.5088">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="276" x="172" y="547.3506">[for each Entry in mapOfValuesPerDevice.values()]</text><path d="M94,557.7715 L94,618.7715 L506,618.7715 L506,567.7715 L496,557.7715 L94,557.7715 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M496,557.7715 L496,567.7715 L506,567.7715 L496,557.7715 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="391" x="100" y="576.7998">If PowerSource Value is within the end Time of the PowerGrid Value</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="104" y="594.0908">and the defined cadence,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="263" x="104" y="611.3818">add the consumption to the totalConsumption</text><path d="M224,631.6445 L289,631.6445 L289,640.9355 L279,650.9355 L224,650.9355 L224,631.6445 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="63.582" style="stroke:#000000;stroke-width:1.5;" width="629" x="224" y="631.6445"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20" x="239" y="646.6729">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="328" x="304" y="645.5146">[if Timestamp NOT before startTime &amp;&amp; NOT after endTime]</text><line style="stroke:#181818;stroke-width:1.0;" x1="305" x2="347" y1="674.2266" y2="674.2266"/><line style="stroke:#181818;stroke-width:1.0;" x1="347" x2="347" y1="674.2266" y2="687.2266"/><line style="stroke:#181818;stroke-width:1.0;" x1="306" x2="347" y1="687.2266" y2="687.2266"/><polygon fill="#181818" points="316,683.2266,306,687.2266,316,691.2266,312,687.2266" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="529" x="312" y="668.9639">totalConsumption += Double.parseDouble(Entry.getValue().getReading().getMeasurement())</text><line style="stroke:#181818;stroke-width:1.0;" x1="305" x2="347" y1="739.5176" y2="739.5176"/><line style="stroke:#181818;stroke-width:1.0;" x1="347" x2="347" y1="739.5176" y2="752.5176"/><line style="stroke:#181818;stroke-width:1.0;" x1="306" x2="347" y1="752.5176" y2="752.5176"/><polygon fill="#181818" points="316,748.5176,306,752.5176,316,756.5176,312,752.5176" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="471" x="312" y="734.2549">peakPowerConsumption = Math.max(peakPowerConsumption, totalConsumption)</text><polygon fill="#181818" points="11,786.8086,1,790.8086,11,794.8086,7,790.8086" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="5" x2="299" y1="790.8086" y2="790.8086"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="17" y="785.5459">peakPowerConsumption</text><rect fill="none" height="43.252" style="stroke:#000000;stroke-width:1.5;" width="258" x="231" y="798.8086"/><path d="M231,798.8086 L293,798.8086 L293,807.8086 L283,817.8086 L231,817.8086 L231,798.8086 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="244" y="814.8369">ref</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="250" x="235" y="834.7578">UC36-SD_Part1-GetPeakPowerConsumption</text><!--SRC=[hLJ1Rjim3BthAuWCA18i3h0Ds258VMcshi2w1MktKu21jUb4g2qPCfssVpzAQb8dTTPYc2-MARr7laTQhBaa-7dsuICaS4uC2y9RMDWxSf1PqxHLpTeQi0Nmck2BRHi2RG1XfJTae2QdRIxO1Jg6zqhTs7iOm6nsPWsZDkJIT6ccL-Gsv0RmvgjUhVdSqOEg1Q0pNQDX6FYi8Qa_g3CQ03RGn7KWgsfho72QxkCghByN4MXRbr7p2ykMckdIN68zcvF7Nyp7_kDQLzGmLlKOBemi3Fj8E9-c8TyHCaKc1v6bbAC2hEZOLJODpYLNyzzU_hj43DmfENjoJoLf1v9XcRKbClKTNPfXxKFdJkSn_VXONIE56UkD46t9bLB6ocUtnYbyjWu8itNigYU6G326Geko3d6CDqiZlKO6T0HtcjVQXDvx6xnbsraue1CKoWc_avCmKovASp8PJMJhMi9rZzw81Tq0Eynk1VIORMdwps_GQRmfQQ9KQMqDnLRT8v70zlrJ8C_MVMd44JUbCPkm68u2OkVjiQdmXuvn9NiDVsdwH6eWYk05kJYt8KDEBnPoAF0fCLl6iclUQNHfiYB-GPXhingE_CSbOTCwgkGF6uv6aN7VtRu29tk6FSTyCkmUV4TU1-uPtOlY-NZwMVaVKpdsMtdSwjvqR4FeqBjTcVwnDOCkODTK-FRz6cv8bCk_o78LX8fEJa8S2nPDKgSFxj6yld5lJs5kMp_sSlqr5DV3OB3lNv0QM_ctldRpIZtgSEtVnwUfztSybUdczQJ2-s7V_lYP59cka6QM92zmgyxiRo-uVxw1_m00]--></g></svg>